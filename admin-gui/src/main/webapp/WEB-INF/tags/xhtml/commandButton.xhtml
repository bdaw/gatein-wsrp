<!--
  ~ JBoss, a division of Red Hat
  ~ Copyright 2010, Red Hat Middleware, LLC, and individual
  ~ contributors as indicated by the @authors tag. See the
  ~ copyright.txt in the distribution for a full listing of
  ~ individual contributors.
  ~
  ~ This is free software; you can redistribute it and/or modify it
  ~ under the terms of the GNU Lesser General Public License as
  ~ published by the Free Software Foundation; either version 2.1 of
  ~ the License, or (at your option) any later version.
  ~
  ~ This software is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
  ~ Lesser General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Lesser General Public
  ~ License along with this software; if not, write to the Free
  ~ Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA
  ~ 02110-1301 USA, or see the FSF site: http://www.fsf.org.
  -->

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:c="http://java.sun.com/jstl/core">

   <table class="ActionContainer">
      <tr>
         <td>
            <div class="ButtonLeft">
               <div class="ButtonRight">
                  <div class="ButtonMiddle">
                     <c:choose>
                        <c:when test="#{!empty rendered}">
                           <!-- direct access to a bean's property via map is a dirty, dirty hack :/ -->
                           <c:set var="renderedVar" value="#{backingBean[rendered]}" scope="request"/>
                           <h:commandLink id="#{id}" action="#{backingBean[action]}" value="#{value}"
                                          rendered="#{empty renderedVar ? '' : renderedVar}"
                                          immediate="#{immediate}">
                              <ui:insert/>
                           </h:commandLink>
                        </c:when>
                        <c:otherwise>
                           <h:commandLink id="#{id}" action="#{backingBean[action]}" value="#{value}"
                                          immediate="#{immediate}">
                              <ui:insert/>
                           </h:commandLink>
                        </c:otherwise></c:choose>
                  </div>
               </div>
            </div>
         </td>
      </tr>
   </table>

</ui:composition>