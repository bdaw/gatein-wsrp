<!--
  ~ JBoss, a division of Red Hat
  ~ Copyright 2010, Red Hat Middleware, LLC, and individual
  ~ contributors as indicated by the @authors tag. See the
  ~ copyright.txt in the distribution for a full listing of
  ~ individual contributors.
  ~
  ~ This is free software; you can redistribute it and/or modify it
  ~ under the terms of the GNU Lesser General Public License as
  ~ published by the Free Software Foundation; either version 2.1 of
  ~ the License, or (at your option) any later version.
  ~
  ~ This software is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
  ~ Lesser General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Lesser General Public
  ~ License along with this software; if not, write to the Free
  ~ Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA
  ~ 02110-1301 USA, or see the FSF site: http://www.fsf.org.
  -->



<ui:decorate template="producerTemplate.xhtml" xmlns="http://www.w3.org/1999/xhtml"
             xmlns:ui="http://java.sun.com/jsf/facelets"
             xmlns:h="http://java.sun.com/jsf/html"
             xmlns:f="http://java.sun.com/jsf/core"
             xmlns:c="http://java.sun.com/jstl/core"
             xmlns:webui="http://jboss.org/gatein">

   <ui:param name="title" value="#{i18n.producer_config_title}"/>

   <ui:define name="content">

      <p id="producer-wsdl">
         #{i1
               8n
               .producer_config_wsdl_v1} <h:outputLink value="#{producer.v1WSDL}">#{producer.v1WSDL}</h:outputLink>
         <br/>
         #{i18n.producer_config_wsdl_v2} <h:outputLink value="#{producer.v2WSDL}">#{        .v
         2WSDL}</h:outputLink>
      </p>

      <h:form id="producer-form">
         <h:panelGrid columns="2" width="100%">
            <h:selectBooleanCheckbox id="cons-reg-req-check"
                                     value="#{producer.registrationRequiredForFullDescription}"/>
            <h:outputText value="#{i18n.producer_config_sd_requires_reg}"/>
            <h:selectBooleanCheckbox value="#{producer.strictMode}"/>
            <h:outputText value="#{i18n.producer_config_strict}"/>

            <h:selectBooleanCheckbox id="req-reg-check" value="#{producer.registrationRequired}" immediate="true"
                                     onclick="this.form.submit()"
                                     valueChangeListener="#{producer.requireRegistrationListener}"/>
            <h:outputText value="#{i18n.producer_config_requires_reg}"/>

            <h:outputText value="  " rendered="#{producer.registrationRequired}"/>
            <h:panelGroup rendered="#{producer.registrationRequired}">
               <h:panelGrid columns="2" width="100%">
                  <h:outputLabel value="#{i18n.producer_config_reg_policy}" for="registrationPolicy"/>
                  <h:inputText id="registrationPolicy" value="#{producer.registrationPolicyClassName}" size="80"/>

                  <h:outputLabel value="#{i18n.producer_config_reg_prop_validator}" for="validator"
                                 rendered="#{producer.defaultRegistrationPolicy}"/>
                  <h:inputText id="validator" value="#{producer.validatorClassName}" size="80"
                               rendered="#{producer.defaultRegistrationPolicy}"/>

               </h:panelGrid>
            </h:panelGroup>

            <h:outputText value="  " rendered="#{producer.registrationRequired}"/>
            <f:subview id="producer-registration" rendered="#{producer.registrationRequired}">

               <webui:blueHeaderBar>
                  <div class="full-width float-left bold">
                     #{i18n.producer_config_reg_props}
                     <div class="add-prop-container">
                        <div class="add-prop-button">
                           <table class="ActionContainer">
                              <tr>
                                 <td>
                                    <div class="ButtonLeft">
                                       <div class="ButtonRight">
                                          <div class="ButtonMiddle">
                                             <h:commandLink id="add-reg-prop"
                                                            action="#{producer.addRegistrationProperty}"
                                                            value="#{i18n.producer_config_add_reg_prop}"/>
                                          </div>
                                       </div>
                                    </div>
                                 </td>
                              </tr>
                           </table>
                           <ui:remove><webui:commandButton id="add-reg-prop" action="addRegistrationProperty"
                                                           backingBean="#{producer}"
                                                           value="#{i18n.producer_config_add_reg_prop}"/>
                           </ui:remove>
                        </div>
                     </div>
                  </div>


               </webui:blueHeaderBar>


               <f:subview rendered="#{!empty producer.registrationProperties}" id="reg-props">
                  <h:dataTable id="reg-properties" value="#{producer.registrationProperties}" var="property"
                               rendered="#{producer.registrationRequired}"
                               rowClasses="EvenRow,OddRow"
                               styleClass="UIGrid ConsumerGrid" width="100%">
                     <h:column>
                        <f:facet name="header">#{i18n.pro
                              e}</f:facet>
                        <h:inputText id="name" value="#{property.nameAsString}" size="21"/>
                     </h:column>
                     <h:column>
                        <f:facet name="header">#{i1
                              _p
                              rop_type}</f:facet>
                        <h:selectOneListbox id="producer-list" disabled="true">
                           <f:selectItems value="#{producer.supportedPropertyTypes}"/>
                        </h:selectOneListbox>
                     </h:column>
                     <h:column>
                        <f:facet name="header">#{i18
                              p_
                              label}</f:facet>
                        <h:inputText id="label" value="#{property.label}" size="21"/>
                     </h:column>
                     <h:column>
                        <f:facet name="header">#{i1
                              op
                              _hint}</f:facet>
                        <h:inputText id="hint" value="#{property.hint}" size="21"/>
                     </h:column>
                     <h:column>
                        <f:facet name="header">#{i18n.producer_config_reg_prop_action}</f:facet>
                        <h:commandLink id="confirm-delete" action="confirmPropDeletion"
                                       value="#{i18n.producer_config_reg_prop_remove}"
                                       styleClass="actionDelete"
                                       actionListener="#{producer.selectProperty}">
                           <f:param name="propName" value="#{property.nameAsString}"/>
                        </h:commandLink>
                     </h:column>
                  </h:dataTable>
               </f:subview>

               <f:subview rendered="#{empty producer.registrationProperties}" id="reg-props-none">
                  <h:outputText value="#{i18n.producer_config_no_reg_props}"/>
               </f:subview>


            </f:subview>


            <h:outputText value="  "/>
            <h:panelGroup styleClass="portlet-section-buttonrow">
               <table class="ActionContainer">
                  <tr>
                     <td>
                        <div class="ButtonLeft">
                           <div class="ButtonRight">
                              <div class="ButtonMiddle">
                                 <h:commandButton id="reg-save" action="#{producer.save}"
                                                  value="#{i18n.producer_config_save}"/>
                              </div>
                           </div>
                        </div>
                     </td>
                     <td>
                        <div class="ButtonLeft">
                           <div class="ButtonRight">
                              <div class="ButtonMiddle">
                                 <h:commandButton id="reg-reload" action="#{producer.reloadConfiguration}"
                                                  value="#{i18n.producer_config_cancel}"/>
                              </div>
                           </div>
                        </div>
                     </td>
                  </tr>
               </table>
               <ui:remove><webui:commandButton id="reg-save" action="save"
                                               backingBean="#{producer}"
                                               value="#{i18n.producer_config_save}"/>

                  <webui:commandButton id="reg-reload" action="reloadConfiguration"
                                       backingBean="#{producer}"
                                       value="#{i18n.producer_config_cancel}"/></ui:remove>

            </h:panelGroup>
         </h:panelGrid>
      </h:form>

   </ui:define>
</ui:decorate>